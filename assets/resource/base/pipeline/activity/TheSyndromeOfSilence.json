{
    "TheSyndromeOfSilence": {
        // 3.2&3.3 版本局外演绎,
        "next": [
            "SOSMainMenu"
        ],
        "interrupt": [
            "SOSStop",
            "FlagInSOSMenu",
            "ReturnMain",
            "EnterTheActivityMain",
            "EnterSOSMenu"
        ]
    },
    // 到 SOS Main Menu
    "FlagInSOSMenu": {
        // 版本活动列表界面 OR 活动列表界面在未开始游戏的情况下点开后的界面
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    114,
                    68,
                    823,
                    198
                ],
                "template": [
                    "SyndromeOfSilence/TheSyndromeOfSilence_Menu1.png",
                    "SyndromeOfSilence/TheSyndromeOfSilence_Menu2.png"
                ]
            }
        },
        "next": [
            "SOSStart"
        ]
    },
    "EnterSOSMenu": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    46,
                    561,
                    782,
                    159
                ],
                "expected": [
                    "无声综合征"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_wait_freezes": {
            "time": 500,
            "target": [
                931,
                551,
                353,
                172
            ]
        }
    },
    "SOSMainMenu": {
        // 有科技树的主界面，进入循环
        "recognition": {
            "type": "Custom",
            "param": {
                "custom_recognition": "MultiRecognition",
                "custom_recognition_param": {
                    "nodes": [
                        "FlagInSOSMainMenu",
                        "SOSStop"
                    ],
                    "logic": {
                        "type": "CUSTOM",
                        "expression": "$0 AND NOT $1"
                    },
                    "return": "$0"
                }
            }
        },
        "next": [
            "SOSSelectNoise"
        ],
        "interrupt": [
            "SOSConfirm", // 先不管旅伴，直接跳过，后面有需要再处理
            "SOSStart"
        ]
    },
    "FlagInSOSMainMenu": {
        // 有科技树的主界面
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    101,
                    358,
                    317,
                    77
                ],
                "expected": [
                    "旅途所获"
                ]
            }
        }
    },
    "SOSStop": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    497,
                    536,
                    503,
                    128
                ],
                "template": [
                    "SyndromeOfSilence/SOSStop.png"
                ]
            }
        },
        "action": {
            "type": "Click",
            "param": {
                "target_offset": [
                    0,
                    0,
                    0,
                    -15
                ]
            }
        },
        "next": [
            "FlagInSOSMainMenu"
        ],
        "interrupt": [
            "SOSSummary",
            "SOSGiveup",
            "SOSStart",
            "SOD_Skip_NoNext",
            "SOSConfirm"
        ]
    },
    "SOSSummary": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    405,
                    0,
                    361,
                    117
                ],
                "template": [
                    "SyndromeOfSilence/SOSSummary.png"
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "SOSGiveup": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    443,
                    157,
                    337,
                    199
                ],
                "template": [
                    "SyndromeOfSilence/SOSGiveup.png"
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "SOSConfirm": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    764,
                    404,
                    73,
                    35
                ],
                "expected": [
                    "确认"
                ],
                "only_rec": true
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "SOSStart": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    540,
                    501,
                    667,
                    179
                ],
                "template": [
                    "SyndromeOfSilence/SOSStart.png"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_delay": 1500
    },
    // 开始局外演绎
    "SOSSelectNoise": {
        // 选择难度界面
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    576,
                    50,
                    124,
                    36
                ],
                "only_rec": true,
                "expected": [
                    "难度选择"
                ]
            }
        },
        // TODO: 选择噪音等级
        "next": [
            "SOSSelectInstrument"
        ],
        "interrupt": [
            "SOSNextStep"
        ]
    },
    "SOSSelectInstrument": {
        // 选择 buff 界面
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    576,
                    50,
                    124,
                    36
                ],
                "only_rec": true,
                "expected": [
                    "选择配器"
                ]
            }
        },
        // TODO: 选择 buff
        "next": [
            "SOSMain"
        ],
        "interrupt": [
            "SOSNextStep",
            "SOSArtefactsObtained",
            "SOSResonatorObtained"
        ]
    },
    "SOSMain": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    613,
                    40,
                    134,
                    31
                ],
                "only_rec": true,
                "expected": [
                    "蒙帕斯大街",
                    "宴会厅",
                    "塞纳河畔",
                    "协和广场",
                    "斗争之路",
                    "乔治的杂志社",
                    "仪式之路",
                    "凯旋门前"
                ]
            }
        },
        "next": [
            "SOSMainMenu"
        ],
        "interrupt": [
            "SOSArtefactsObtained",
            "SOSSelectNode",
            "SOSSelectHarmonic",
            "SOSHarmonicObtained",
            "SOSStatsUp",
            "SOSSetOff",
            "SOSSelectResonator",
            "SOSLoseArtefact",
            "SOSStrengthenArtefact",
            "SOSSummary",
            "SOSGiveup",
            "SOSStart",
            "SOD_Skip_NoNext",
            "SOSConfirm"
        ]
    },
    // 演绎主体逻辑
    "SOSSelectNode": {
        // 选择最左侧节点
        "recognition": {
            "type": "NeuralNetworkDetect",
            "param": {
                "model": "sos_nodes.onnx",
                "labels": [
                    "C", // 已完成节点
                    "Conflict", // 冲突
                    "Dangerous", // 险象环生
                    "Encounter", // 遭遇
                    "EncounterAlongTheWay", // 途中偶遇
                    "EntertainmentOnTheWay", // 途中余兴
                    "FierceBattle", // 恶战
                    "Message", // 对话
                    "RestArea", // 休憩处
                    "ShoppingOpportunity", // 购物契机
                    "TheHandOfAMasterCraftsman", // 巧匠之手
                    "TheOnlyWay", // 必经之路
                    "TreasureLand" // 藏宝地
                ],
                "expected": [
                    1,
                    2,
                    3,
                    4,
                    5,
                    6,
                    8,
                    9,
                    10,
                    11,
                    12
                ],
                "order_by": "Horizontal",
                "index": 0
            }
        },
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "SOSSelectNode"
            }
        },
        "next": [
            "SOSNodeProcess"
        ]
    },
    "SOSNodeProcess": {
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "SOSNodeProcess"
            }
        }
    },
    // 主页面各种弹窗处理
    "SOSArtefactsObtained": {
        // 获得造物
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    576,
                    50,
                    124,
                    36
                ],
                "only_rec": true,
                "expected": [
                    "获得造物"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_wait_freezes": 500
    },
    "SOSSelectArtefact": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    576,
                    50,
                    124,
                    36
                ],
                "only_rec": true,
                "expected": [
                    "获得造物"
                ]
            }
        },
        "action": {
            "type": "Click",
            "param": {
                "target": [
                    510,
                    312,
                    69,
                    78
                ]
            }
        },
        "next": [
            "SOSSelectArtefactConfirm",
            "SOSSelectArtefact"
        ]
    },
    "SOSSelectArtefactConfirm": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    136,
                    524,
                    996,
                    86
                ],
                "template": [
                    "SyndromeOfSilence/SelectArtefactConfirmButton.png"
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "SOSLoseArtefact": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    576,
                    50,
                    124,
                    36
                ],
                "only_rec": true,
                "expected": [
                    "失去造物"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_wait_freezes": 500
    },
    "SOSStrengthenArtefact": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    576,
                    50,
                    124,
                    36
                ],
                "only_rec": true,
                "expected": [
                    "造物强化"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_wait_freezes": 500
    },
    "SOSResonatorObtained": {
        // 获得共鸣器
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    561,
                    50,
                    159,
                    37
                ],
                "only_rec": true,
                "expected": [
                    "获得共鸣器"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_wait_freezes": 500
    },
    "SOSSelectResonator": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    561,
                    50,
                    159,
                    37
                ],
                "only_rec": true,
                "expected": [
                    "选择共鸣器"
                ]
            }
        },
        "action": {
            "type": "Click",
            "param": {
                "target": [
                    375,
                    288,
                    75,
                    70
                ]
            }
        },
        "next": [
            "SOSSelectResonatorConfirm",
            "SOSSelectResonator"
        ]
    },
    "SOSSelectResonatorConfirm": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    609,
                    586,
                    65,
                    36
                ],
                "only_rec": true,
                "expected": [
                    "确认"
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "SOSNextStep": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    1002,
                    545,
                    227,
                    149
                ],
                "template": [
                    "SyndromeOfSilence/NextStep.png"
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "SOSGOTO": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    1010,
                    574,
                    69,
                    36
                ],
                "only_rec": true,
                "expected": [
                    "前往"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_wait_freezes": 500,
        "post_delay": 3000
    },
    "SOSContinue": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    1020,
                    642,
                    69,
                    38
                ],
                "only_rec": true,
                "expected": [
                    "继续"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_wait_freezes": {
            "time": 700,
            "target": [
                852,
                131,
                393,
                488
            ]
        }
    },
    "SOSHarmonicObtained": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    581,
                    52,
                    118,
                    33
                ],
                "only_rec": true,
                "expected": [
                    "获得谐波"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_wait_freezes": 500
    },
    "SOSStatsUp": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    581,
                    52,
                    118,
                    33
                ],
                "only_rec": true,
                "expected": [
                    "属性提升"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_wait_freezes": 500
    },
    "SOSEventEnd": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    1023,
                    647,
                    62,
                    31
                ],
                "only_rec": true,
                "expected": [
                    "结束"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_wait_freezes": 500
    },
    "SOSTeamSelect": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    1052,
                    637,
                    126,
                    33
                ],
                "only_rec": true,
                "expected": [
                    "开始行动"
                ]
            }
        },
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "TeamSelect",
                "custom_action_param": {
                    "team": 1
                }
            }
        }
    },
    "SOSCombat": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    1052,
                    637,
                    126,
                    33
                ],
                "only_rec": true,
                "expected": [
                    "开始行动"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "timeout": 1000000,
        "next": [
            "SOSVictory",
            "SOSCombat"
        ]
    },
    "SOSVictory": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    678,
                    10,
                    473,
                    240
                ],
                "expected": [
                    "战斗",
                    "胜利"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "pre_wait_freezes": {
            "time": 500,
            "target": [
                614,
                457,
                666,
                263
            ]
        }
    },
    "SOSFailed": {
        "recognition": {
            "type": "OCR",
            "param": {
                "only_rec": true,
                "roi": [
                    490,
                    115,
                    289,
                    78
                ],
                "expected": [
                    "战斗失败"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "pre_wait_freezes": {
            "time": 500,
            "target": [
                614,
                457,
                666,
                263
            ]
        }
    },
    "SOSSelectHarmonic": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    581,
                    52,
                    118,
                    33
                ],
                "only_rec": true,
                "expected": [
                    "谐波选择"
                ]
            }
        },
        "action": {
            "type": "Click",
            "param": {
                "target": [
                    516,
                    125,
                    67,
                    32
                ]
            }
        },
        "next": [
            "SOSSelectConfirmButton",
            "SOSSelectHarmonic"
        ]
    },
    "SOSSelectConfirmButton": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    1097,
                    0,
                    153,
                    720
                ],
                "template": [
                    "SyndromeOfSilence/SelectConfirmButton.png"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_delay": 1500
    },
    "SOSSelectOption": {
        "recognition": {
            "type": "ColorMatch",
            "param": {
                "lower": [
                    105,
                    150,
                    150
                ],
                "upper": [
                    131,
                    255,
                    255
                ],
                "method": 40,
                "connected": true,
                "count": 500
            }
        },
        "next": [
            "SOSSelectOptionConfirm"
        ]
    },
    "SOSSelectOptionConfirm": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    1173,
                    153,
                    85,
                    563
                ],
                "template": [
                    "SyndromeOfSilence/SelectOptionConfirmButton.png"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_wait_freezes": 500
    },
    "SOSSelectOption_HSV": {
        "recognition": {
            "type": "ColorMatch",
            "param": {
                "lower": [
                    105,
                    150,
                    150
                ],
                "upper": [
                    131,
                    255,
                    255
                ],
                "method": 40,
                "connected": true,
                "count": 500
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "SOSSelectOption_OCR": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    832,
                    118,
                    445,
                    595
                ],
                "expected_code": "string"
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "SelectEncounterOption_OCR": {
        "recognition": {
            "type": "Custom",
            "param": {
                "custom_recognition": "SOSSelectEncounterOptionList"
            }
        },
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "SOSSelectEncounterOption_OCR"
            }
        },
        "next": [
            "SOSSelectEncounterOptionConfirm",
            "SelectEncounterOption_OCR"
        ]
    },
    "SOSSelectEncounterOptionConfirm": {
        "recognition": {
            "type": "Custom",
            "param": {
                "custom_recognition": "SOSSelectEncounterOptionFindSelected"
            }
        },
        "action": {
            "type": "Click"
        },
        "pre_delay": 700,
        "next": [
            "SOSSelectEncounterOptionConfirmFinished",
            "SOSSelectEncounterOptionConfirm"
        ]
    },
    "SelectEncounterOption_HSV": {
        "recognition": {
            "type": "Custom",
            "param": {
                "custom_recognition": "SOSSelectEncounterOptionList"
            }
        },
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "SOSSelectEncounterOption_HSV"
            }
        },
        "next": [
            "SOSSelectEncounterOptionConfirm",
            "SelectEncounterOption_HSV"
        ]
    },
    "SOSNextMessage": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    1028,
                    313,
                    51,
                    342
                ],
                "template": [
                    "SyndromeOfSilence/NextMessage.png"
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "SOSNextMessage_left": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    227,
                    422,
                    27,
                    26
                ],
                "template": [
                    "SyndromeOfSilence/NextMessage.png"
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "SOSStatsUpButton": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    1113,
                    618,
                    54,
                    35
                ],
                "only_rec": true,
                "expected": [
                    "提升"
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "SOSSetOff": {
        "recognition": {
            "type": "OCR",
            "param": {
                "expected": [
                    "启程"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_wait_freezes": 500,
        "next": [
            "SOSGoToNextScene",
            "SOSSetOff"
        ]
    },
    "SOSGoToNextScene": {
        "recognition": {
            "type": "OCR",
            "param": {
                "expected": [
                    "翌日清晨",
                    "翌日响午",
                    "翌日晚上"
                ],
                "order_by": "Vertical"
            }
        },
        "action": {
            "type": "Click"
        },
        "next": [
            "FlagInSOSMain",
            "SOSGoToNextScene"
        ]
    },
    "SOSDice": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    593,
                    465,
                    99,
                    28
                ],
                "only_rec": true,
                "expected": [
                    "点击投掷"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "next": [
            "SOSFlagInDice"
        ]
    },
    "SOSFlagInDice": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    88,
                    240,
                    71,
                    26
                ],
                "only_rec": true,
                "expected": [
                    "成功率"
                ]
            }
        },
        "inverse": true
    },
    // 工具节点
    "SOSEventRec": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    858,
                    72,
                    132,
                    33
                ],
                "only_rec": true,
                "expected": [
                    ".+"
                ],
                "replace": [
                    "到",
                    "刽"
                ]
            }
        }
    },
    "FlagInSOSMain": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    613,
                    40,
                    134,
                    31
                ],
                "only_rec": true,
                "expected": [
                    "蒙帕斯大街",
                    "宴会厅",
                    "塞纳河畔",
                    "协和广场",
                    "斗争之路",
                    "乔治的杂志社",
                    "仪式之路",
                    "凯旋门前"
                ]
            }
        }
    },
    "SOSSelectEncounterOption_HSV_Unselected": {
        "recognition": {
            "type": "ColorMatch",
            "param": {
                "lower": [
                    105,
                    150,
                    150
                ],
                "upper": [
                    131,
                    255,
                    255
                ],
                "method": 40,
                "count": 500
            }
        }
    },
    "SOSSelectEncounterOption_HSV_Selected": {
        "recognition": {
            "type": "ColorMatch",
            "param": {
                "lower": [
                    27,
                    150,
                    130
                ],
                "upper": [
                    29,
                    210,
                    190
                ],
                "method": 40,
                "connected": true,
                "count": 400
            }
        }
    },
    "SOSSelectEncounterOptionRec_Template": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": [
                    "SyndromeOfSilence/Magnifier.png",
                    "SyndromeOfSilence/MagnifierY.png"
                ]
            }
        }
    },
    "SOSSelectEncounterOptionRec_OCR": {
        "recognition": {
            "type": "OCR",
            "param": {
                "expected": [
                    "[\\u4e00-\\u9fa5]+"
                ],
                "only_rec": true
            }
        }
    },
    "SOSSelectEncounterOptionConfirmFinished": {
        "recognition": {
            "type": "Custom",
            "param": {
                "custom_recognition": "SOSSelectEncounterOptionFindSelected"
            }
        },
        "action": {
            "type": "Click"
        },
        "inverse": true
    }
}