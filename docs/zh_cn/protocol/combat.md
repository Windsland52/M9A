---
order: 4
icon: ri:sword-line
---

# 战斗数据协议

> [!TIP]
>
> 本文档说明战斗相关数据的存储格式和结构

## 资源存放位置

战斗数据存储在 `assets/resource/data/combat/` 目录下：

- `items.json` - 战斗物品数据
- `drop_index.json` - 关卡掉落索引

## items.json - 战斗物品数据

### 文件结构

```jsonc
{
    "gold": {},    // 金色品质物品
    "yellow": {},  // 黄色品质物品
    "purple": {},  // 紫色品质物品
    "blue": {},    // 蓝色品质物品
    "green": {}    // 绿色品质物品
}
```

### 品质分类

战斗物品按品质（稀有度）分为五个等级：

- `gold` - 金色（最高品质）
- `yellow` - 黄色（高品质）
- `purple` - 紫色（中等品质）
- `blue` - 蓝色（普通品质）
- `green` - 绿色（基础品质）

### 物品数据格式

每个物品以物品ID为键，包含物品名称：

```jsonc
{
    "gold": {
        "111004": {"name": "分别善恶之果"},
        "111005": {"name": "长青剑"},
        "111006": {"name": "金羊毛"}
    }
}
```

## drop_index.json - 关卡掉落索引

### 文件结构

```jsonc
{
    "关卡编号": [物品ID列表]
}
```

### 关卡编号格式

关卡编号格式：`"章节-关卡难度"`

- 章节：数字（如 `1`, `2`, `12`）
- 关卡：数字（如 `1`, `14`, `21`）
- 难度：
  - `G` - 故事难度
  - `E` - 厄险难度

示例：

- `"1-1G"` - 第1章第1关故事难度
- `"12-21E"` - 第12章第21关厄险难度

### 数据示例

```jsonc
{
    "1-1G": [110501, 110101, 110201, 110301, 110401],
    "1-14E": [110102, 110101, 110201, 110301, 110401, 110501],
    "12-21E": [110904, 110903, 110101, 111102, 110902, ...]
}
```

## 使用说明

这些数据主要用于：

1. **物品识别**：通过ID或名称识别战斗中获得的物品
2. **品质判断**：根据物品所属的品质分类判断稀有度
3. **掉落预测**：根据关卡编号查询可能掉落的物品列表
4. **掉落统计**：记录和分析不同关卡的掉落情况
